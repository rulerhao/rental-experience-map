# 租屋篩選功能說明

## 功能概述

新增了完整的租屋篩選功能，讓使用者可以根據不同條件快速找到符合需求的租屋資訊。

## 篩選條件

### 1. 房型篩選
- 套房
- 雅房  
- 分租套房
- 整層住家
- 獨立套房
- 其他

### 2. 行政區篩選
- 自動從現有租屋資料中提取行政區
- 支援台灣各縣市的行政區格式
- 動態更新選項列表

### 3. 評分篩選
- 1星以上 ⭐
- 2星以上 ⭐⭐
- 3星以上 ⭐⭐⭐
- 4星以上 ⭐⭐⭐⭐

### 4. 設施篩選
支援多選的設施篩選：
- 冷氣
- 洗衣機
- 網路
- 電視
- 冰箱
- 停車位

### 5. 租金範圍篩選
- 最低租金設定
- 最高租金設定
- 支援數字輸入

## 技術實作

### 核心類別：FilterManager

```javascript
class FilterManager {
    constructor(i18nService)
    setRentals(rentals)           // 設定要篩選的租屋資料
    setOnFilterChange(callback)   // 設定篩選結果回調函數
    applyFilters()               // 應用當前篩選條件
    clearAllFilters()            // 清除所有篩選條件
    extractDistrict(address)     // 從地址提取行政區
}
```

### 整合方式

1. **RentalApp 整合**
   - 在 RentalApp 中初始化 FilterManager
   - 設定篩選結果回調，更新地圖和列表顯示
   - 當資料載入時更新篩選器

2. **UI 元素**
   - 篩選器位於側邊欄上方
   - 包含清除全部按鈕
   - 支援多語言顯示

3. **多語言支援**
   - 所有篩選選項都支援多語言
   - 自動更新篩選器文字

## 使用方式

### 基本篩選
1. 選擇房型下拉選單
2. 選擇行政區
3. 設定最低評分
4. 勾選需要的設施
5. 輸入租金範圍

### 清除篩選
點擊「清除全部」按鈕可以重置所有篩選條件

### 篩選結果
- 地圖上只顯示符合條件的標記
- 側邊欄列表只顯示符合條件的項目
- 即時更新，無需重新載入頁面

## 行政區提取邏輯

支援台灣行政區格式的自動識別：
- 完整格式：`台北市信義區` 
- 縣市格式：`台北市`
- 支援所有台灣縣市和行政區

```javascript
// 範例地址處理
"台北市信義區信義路五段7號" → "台北市信義區"
"新北市板橋區文化路一段188號" → "新北市板橋區"  
"台中市西屯區台灣大道三段99號" → "台中市西屯區"
```

## 測試

提供了完整的測試文件 `test-filter-functionality.html`，包含：
- FilterManager 類別測試
- 行政區提取功能測試
- 各種篩選條件測試
- 綜合篩選測試

## 檔案結構

```
src/client/js/FilterManager.js     # 篩選管理器核心類別
src/client/js/RentalApp.js         # 主應用程式（已更新整合篩選）
src/client/locales/*.json          # 多語言翻譯文件（已新增篩選翻譯）
index.html                         # 主頁面（已新增篩選UI）
test-filter-functionality.html     # 篩選功能測試頁面
```

## 未來擴展

可以考慮新增的篩選功能：
- 距離篩選（以特定地點為中心）
- 新增時間篩選
- 更多設施選項
- 價格區間預設選項
- 儲存篩選條件功能